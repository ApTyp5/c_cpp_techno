addons:
  apt:
    update: true

os: linux
language: cpp

stages:
  - cppcheck

install: skip
script: skip


jobs:
  include:
    - stage: cppcheck
      env:
        - DIR=IT1
        - DIR=IT2
      install: 
        - sudo apt install cppcheck
        - cppcheck ./$(DIR)

    - stage: 
      install:
          - sudo apt update
          - sudo apt install build-essential
          - sudo apt install valgrind
          - sudo apt install cmake
          - sudo apt install libgtest-dev 
          - cd /usr/src/gtest 
          - sudo cmake .
          - sudo make
          - sudo cp *.a /usr/lib
          - cd -
          - cd $DIR
          - cmake .
          - cmake --build .



        
          #    stage: st3
          #        script:
          #         - valgrind --leak-check=full -q ./test.exe
          #         - cd CMakeFiles/test.exe.dir
          #         - echo "Покрытие:"
          #         - gcov test.cpp | head -n 2


